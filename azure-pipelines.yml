# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

- task: Docker@2
  displayName: Login to ACR
  inputs:
    command: login
    containerRegistry: NodeContainerRegistry
- task: Docker@2
  displayName: Build
  inputs:
    command: build
    repository: jsPipeline
    tags: tag1
#steps:
#- task: NodeTool@0
#  inputs:
#    versionSpec: '10.x'
#  displayName: 'Install Node.js'
#
#- script: |
#    npm install
#    npm run build
#  displayName: 'npm install and build'
#  
#- task: PublishTestResults@2
#  inputs:
#    testResultsFormat: 'JUnit' # Options: JUnit, NUnit, VSTest, xUnit, cTest
#    testResultsFiles: '**/TEST-*.xml' 
#    
#- task: PublishCodeCoverageResults@1
#  inputs: 
#    codeCoverageTool: Cobertura
#    summaryFileLocation: '$(System.DefaultWorkingDirectory)/**/*coverage.xml'
#    reportDirectory: '$(System.DefaultWorkingDirectory)/**/coverage'
